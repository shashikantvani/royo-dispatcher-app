{"version":3,"sources":["withStickyHeader.tsx"],"names":["NOOP","createCellRenderer","itemLayoutAnimation","cellRenderer","props","onLayout","children","withStickyHeader","component","AnimatedComponent","Animated","createAnimatedComponent","React","forwardRef","ref","containerStyle","contentContainerStyle","overScrollMode","renderHeader","renderTabs","scrollEventThrottle","style","rest","contentContainerPaddingTop","contentContainerPaddingBottom","headerAnimatedStyle","headerHeight","listPaddingTop","onHeaderLayoutInternal","onTabsLayoutInternal","scrollHandler","tabsHeight","useMemo","styles","container","header","paddingTop","paddingBottom","StyleSheet","create","alignSelf","flex","overflow","position","left","right","zIndex"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport * as React from 'react';\nimport type { LayoutChangeEvent } from 'react-native';\nimport { StyleSheet, View } from 'react-native';\nimport Animated from 'react-native-reanimated';\n\nimport type { StickyHeaderSharedProps } from './StickyHeaderProps';\nimport { useStickyHeaderProps } from './useStickyHeaderProps';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst NOOP = () => {};\n\nconst createCellRenderer = (itemLayoutAnimation: any) => {\n  const cellRenderer: React.FC<{ onLayout: (event: LayoutChangeEvent) => void }> = (props) => {\n    return (\n      <Animated.View layout={itemLayoutAnimation} onLayout={props.onLayout}>\n        {props.children}\n      </Animated.View>\n    );\n  };\n\n  return cellRenderer;\n};\n\nexport function withStickyHeader<T extends React.ComponentClass<any>>(component: T) {\n  const AnimatedComponent = Animated.createAnimatedComponent(component) as any;\n\n  return React.forwardRef<\n    T,\n    StickyHeaderSharedProps & Animated.AnimateProps<React.ComponentPropsWithRef<T>>\n  >((props, ref) => {\n    const {\n      containerStyle,\n      contentContainerStyle,\n      itemLayoutAnimation,\n      overScrollMode = 'never',\n      renderHeader,\n      renderTabs,\n      scrollEventThrottle = 16,\n      style,\n      ...rest\n    } = props;\n    const {\n      contentContainerPaddingTop,\n      contentContainerPaddingBottom,\n      headerAnimatedStyle,\n      headerHeight,\n      listPaddingTop,\n      onHeaderLayoutInternal,\n      onTabsLayoutInternal,\n      scrollHandler,\n      tabsHeight,\n    } = useStickyHeaderProps(props);\n\n    const cellRenderer = React.useMemo(\n      () => createCellRenderer(itemLayoutAnimation),\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      []\n    );\n\n    return (\n      <View style={[styles.container, containerStyle]}>\n        <Animated.View pointerEvents=\"box-none\" style={[styles.header, headerAnimatedStyle]}>\n          {renderHeader ? (\n            <View pointerEvents=\"box-none\" onLayout={onHeaderLayoutInternal}>\n              {renderHeader()}\n            </View>\n          ) : null}\n          {renderTabs ? (\n            <View pointerEvents=\"box-none\" onLayout={onTabsLayoutInternal}>\n              {renderTabs()}\n            </View>\n          ) : null}\n        </Animated.View>\n        <AnimatedComponent\n          ref={ref}\n          {...rest}\n          CellRendererComponent={cellRenderer}\n          contentContainerStyle={[\n            contentContainerStyle,\n            { paddingTop: headerHeight + contentContainerPaddingTop },\n            { paddingBottom: tabsHeight + contentContainerPaddingBottom },\n          ]}\n          onScroll={scrollHandler}\n          /**\n           * Workaround for reanimated v2.3+ bug\n           *\n           * https://github.com/software-mansion/react-native-reanimated/issues/2735#issuecomment-1001714779\n           */\n          onScrollBeginDrag={NOOP}\n          onScrollEndDrag={NOOP}\n          onMomentumScrollBegin={NOOP}\n          onMomentumScrollEnd={NOOP}\n          overScrollMode={overScrollMode}\n          progressViewOffset={headerHeight}\n          scrollEventThrottle={scrollEventThrottle}\n          style={[style, { paddingTop: tabsHeight + listPaddingTop }]}\n        />\n      </View>\n    );\n  }) as unknown as React.FC<\n    StickyHeaderSharedProps & Animated.AnimateProps<React.ComponentPropsWithRef<T>>\n  >;\n}\n\nexport const styles = StyleSheet.create({\n  container: {\n    alignSelf: 'stretch',\n    flex: 1,\n    overflow: 'hidden',\n  },\n  header: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    zIndex: 999,\n  },\n});\n"]}