{"version":3,"sources":["HeaderBar.tsx"],"names":["HIT_SLOP","top","left","bottom","right","HeaderBar","backgroundColor","enableSafeAreaTopInset","height","image","leftTopIcon","leftTopIconAccessibilityLabel","leftTopIconOnPress","leftTopIconTestID","rightTopIcon","rightTopIconAccessibilityLabel","rightTopIconOnPress","rightTopIconTestID","scrollValue","title","titleStyle","titleTestID","beforeFadeImg","startFadeImg","finishFadeImg","beforeFadeName","startFadeName","finishFadeName","imageAnimatedStyle","opacity","value","Extrapolate","CLAMP","nameAnimatedStyle","headerTitleContainerRTLStyle","styles","headerTitleContainerMarginRight","headerTitleContainerMarginLeft","headerTitleContainerMarginEnd","wrapperAnimatedStyle","safeAreaEdges","push","commonStyles","container","headerWrapper","leftHeaderButton","headerTitleContainer","headerPic","headerTitle","rightHeaderButton","StyleSheet","create","width","borderRadius","fontSize","lineHeight","color","colors","white","marginHorizontal","textAlign","flex","flexDirection","alignItems","marginEnd","marginLeft","marginRight"],"mappings":"qKAAA,oDAEA,yCACA,uFAEA,0EAEA,6CAEA,0FACA,6DACA,iFACA,iE,0mCAEA,GAAMA,CAAAA,QAAQ,CAAG,CACfC,GAAG,CAAE,EADU,CAEfC,IAAI,CAAE,EAFS,CAGfC,MAAM,CAAE,EAHO,CAIfC,KAAK,CAAE,EAJQ,CAAjB,CAkBO,GAAMC,CAAAA,SAAgC,CAAG,QAAnCA,CAAAA,SAAmC,MAiB1C,IAhBJC,CAAAA,eAgBI,MAhBJA,eAgBI,CAfJC,sBAeI,MAfJA,sBAeI,CAdJC,MAcI,MAdJA,MAcI,CAbJC,KAaI,MAbJA,KAaI,CAZJC,WAYI,MAZJA,WAYI,CAXJC,6BAWI,MAXJA,6BAWI,CAVJC,kBAUI,MAVJA,kBAUI,CATJC,iBASI,MATJA,iBASI,CARJC,YAQI,MARJA,YAQI,CAPJC,8BAOI,MAPJA,8BAOI,CANJC,mBAMI,MANJA,mBAMI,CALJC,kBAKI,MALJA,kBAKI,CAJJC,WAII,MAJJA,WAII,CAHJC,KAGI,MAHJA,KAGI,CAFJC,UAEI,MAFJA,UAEI,uBADJC,WACI,CADJA,WACI,2BADU,uBACV,kBACJ,UAAqD,CACnD,mCAAeb,MAAf,CAAuB,EAAvB,CADmD,CAEnD,mCAAeA,MAAf,CAAuB,EAAvB,CAFmD,CAGnD,mCAAeA,MAAf,CAAuB,EAAvB,CAHmD,CAArD,CAAOc,aAAP,UAAsBC,YAAtB,UAAoCC,aAApC,UAKA,UAAwD,CACtD,mCAAehB,MAAf,CAAuB,EAAvB,CADsD,CAEtD,mCAAeA,MAAf,CAAuB,EAAvB,CAFsD,CAGtD,mCAAeA,MAAf,CAAuB,EAAvB,CAHsD,CAAxD,CAAOiB,cAAP,UAAuBC,aAAvB,UAAsCC,cAAtC,UAMA,GAAMC,CAAAA,kBAAkB,CAAG,4CAAiB,UAAM,CAChD,MAAO,CACLC,OAAO,CAAE,uCACPX,WAAW,CAACY,KADL,CAEP,CAAC,CAAD,CAAIR,aAAJ,CAAmBC,YAAnB,CAAiCC,aAAjC,CAFO,CAGP,CAAC,CAAD,CAAI,CAAJ,CAAO,GAAP,CAAY,CAAZ,CAHO,CAIPO,mCAAYC,KAJL,CADJ,CAAP,CAQD,CAT0B,CASxB,CAACd,WAAD,CAAcI,aAAd,CAA6BC,YAA7B,CAA2CC,aAA3C,CATwB,CAA3B,CAUA,GAAMS,CAAAA,iBAAiB,CAAG,4CAAiB,UAAM,CAC/C,MAAO,CACLJ,OAAO,CAAE,uCACPX,WAAW,CAACY,KADL,CAEP,CAAC,CAAD,CAAIL,cAAJ,CAAoBC,aAApB,CAAmCC,cAAnC,CAFO,CAGP,CAAC,CAAD,CAAI,CAAJ,CAAO,GAAP,CAAY,CAAZ,CAHO,CAIPI,mCAAYC,KAJL,CADJ,CAAP,CAQD,CATyB,CASvB,CAACd,WAAD,CAAcO,cAAd,CAA8BC,aAA9B,CAA6CC,cAA7C,CATuB,CAA1B,CAUA,GAAMO,CAAAA,4BAA4B,CAAG,+BACnCC,MAAM,CAACC,+BAD4B,CAEnCD,MAAM,CAACE,8BAF4B,CAGnCF,MAAM,CAACG,6BAH4B,CAArC,CAKA,GAAMC,CAAAA,oBAAoB,CAAG,4CAAiB,UAAM,CAClD,MAAO,CAELjC,eAAe,CAAE,mDAAuBA,eAAvB,CAFZ,CAAP,CAID,CAL4B,CAK1B,CAACA,eAAD,CAL0B,CAA7B,CAOA,GAAMkC,CAAAA,aAAqB,CAAG,CAAC,MAAD,CAAS,OAAT,CAA9B,CAEA,GAAIjC,sBAAJ,CAA4B,CAC1BiC,aAAa,CAACC,IAAd,CAAmB,KAAnB,EACD,CAED,MACE,qBAAC,wCAAD,EAAc,KAAK,CAAED,aAArB,CAAoC,KAAK,CAAEE,wBAAaC,SAAxD,8EACE,oBAAC,8BAAD,CAAU,IAAV,EAAe,KAAK,CAAE,CAACD,wBAAaE,aAAd,CAA6BL,oBAA7B,CAAtB,8EACG7B,WAAW,CACV,oBAAC,sBAAD,EACE,kBAAkB,CAAEC,6BADtB,CAEE,iBAAiB,CAAC,QAFpB,CAGE,OAAO,CAAEX,QAHX,CAIE,OAAO,CAAEY,kBAJX,CAKE,KAAK,CAAEuB,MAAM,CAACU,gBALhB,CAME,MAAM,CAAEhC,iBANV,+EAOE,oBAAC,qBAAD,EAAc,IAAI,CAAEH,WAApB,+EAPF,CADU,CAUR,IAXN,CAaE,oBAAC,iBAAD,EAAM,KAAK,CAAE,CAACyB,MAAM,CAACW,oBAAR,CAA8BZ,4BAA9B,CAAb,8EACE,oBAAC,8BAAD,CAAU,KAAV,EACE,MAAM,CAAEzB,KADV,CAEE,KAAK,CAAE,CAAC0B,MAAM,CAACY,SAAR,CAAmBnB,kBAAnB,CAFT,+EADF,CAKE,oBAAC,8BAAD,CAAU,IAAV,EACE,aAAa,CAAE,CADjB,CAEE,KAAK,CAAE,CAACO,MAAM,CAACa,WAAR,CAAqBf,iBAArB,CAAwCb,UAAxC,CAFT,CAGE,MAAM,CAAEC,WAHV,+EAIGF,KAJH,CALF,CAbF,CAyBGL,YAAY,CACX,oBAAC,sBAAD,EACE,kBAAkB,CAAEC,8BADtB,CAEE,iBAAiB,CAAC,QAFpB,CAGE,OAAO,CAAEf,QAHX,CAIE,OAAO,CAAEgB,mBAJX,CAKE,KAAK,CAAEmB,MAAM,CAACc,iBALhB,CAME,MAAM,CAAEhC,kBANV,+EAOE,oBAAC,qBAAD,EAAc,IAAI,CAAEH,YAApB,+EAPF,CADW,CAUT,IAnCN,CADF,CADF,CAyCD,CA5GM,C,4BA8GP,GAAMqB,CAAAA,MAAM,CAAGe,wBAAWC,MAAX,CAAkB,CAC/BJ,SAAS,CAAE,CACTK,KAAK,CAAE,EADE,CAET5C,MAAM,CAAE,EAFC,CAGT6C,YAAY,CAAE,CAHL,CADoB,CAM/BL,WAAW,CAAE,CACXM,QAAQ,CAAE,EADC,CAEXC,UAAU,CAAE,EAFD,CAGXC,KAAK,CAAEC,kBAAOC,KAHH,CAIXC,gBAAgB,CAAE,EAJP,CAKXC,SAAS,CAAE,MALA,CANkB,CAa/Bd,oBAAoB,CAAE,CACpBe,IAAI,CAAE,CADc,CAEpBC,aAAa,CAAE,KAFK,CAGpBC,UAAU,CAAE,QAHQ,CAbS,CAkB/BzB,6BAA6B,CAAE,CAC7B0B,SAAS,CAAE,EADkB,CAlBA,CAqB/B3B,8BAA8B,CAAE,CAC9B4B,UAAU,CAAE,EADkB,CArBD,CAwB/B7B,+BAA+B,CAAE,CAC/B8B,WAAW,CAAE,EADkB,CAxBF,CA2B/BrB,gBAAgB,CAAE,CAChBkB,UAAU,CAAE,YADI,CAEhBF,IAAI,CAAE,CAFU,CA3Ba,CA+B/BZ,iBAAiB,CAAE,CACjBY,IAAI,CAAE,CADW,CAEjBE,UAAU,CAAE,UAFK,CA/BY,CAAlB,CAAf","sourcesContent":["import * as React from 'react';\nimport type { ImageSourcePropType, StyleProp, TextStyle, ViewStyle } from 'react-native';\nimport { Pressable, StyleSheet, View } from 'react-native';\nimport Animated, { Extrapolate, interpolate, useAnimatedStyle } from 'react-native-reanimated';\nimport type { Edge } from 'react-native-safe-area-context';\nimport { SafeAreaView } from 'react-native-safe-area-context';\n\nimport { colors, commonStyles } from '../../../constants';\nimport type { AnimatedColorProp, IconProps } from '../../common/SharedProps';\nimport IconRenderer from '../../common/components/IconRenderer';\nimport { useRTLStyles } from '../../common/hooks/useRTLStyles';\nimport { parseAnimatedColorProp } from '../../common/utils/parseAnimatedColorProp';\nimport { scrollPosition } from '../../common/utils/scrollPosition';\n\nconst HIT_SLOP = {\n  top: 15,\n  left: 15,\n  bottom: 15,\n  right: 15,\n};\n\ninterface HeaderProps extends IconProps {\n  backgroundColor?: AnimatedColorProp;\n  enableSafeAreaTopInset?: boolean;\n  height: number;\n  image?: ImageSourcePropType;\n  scrollValue: Animated.SharedValue<number>;\n  title?: string;\n  titleStyle?: StyleProp<Animated.AnimateStyle<TextStyle>>;\n  titleTestID?: string;\n}\n\nexport const HeaderBar: React.FC<HeaderProps> = ({\n  backgroundColor,\n  enableSafeAreaTopInset,\n  height,\n  image,\n  leftTopIcon,\n  leftTopIconAccessibilityLabel,\n  leftTopIconOnPress,\n  leftTopIconTestID,\n  rightTopIcon,\n  rightTopIconAccessibilityLabel,\n  rightTopIconOnPress,\n  rightTopIconTestID,\n  scrollValue,\n  title,\n  titleStyle,\n  titleTestID = 'AvatarHeaderBarTestID',\n}) => {\n  const [beforeFadeImg, startFadeImg, finishFadeImg] = [\n    scrollPosition(height, 30),\n    scrollPosition(height, 40),\n    scrollPosition(height, 70),\n  ];\n  const [beforeFadeName, startFadeName, finishFadeName] = [\n    scrollPosition(height, 50),\n    scrollPosition(height, 60),\n    scrollPosition(height, 75),\n  ];\n\n  const imageAnimatedStyle = useAnimatedStyle(() => {\n    return {\n      opacity: interpolate(\n        scrollValue.value,\n        [0, beforeFadeImg, startFadeImg, finishFadeImg],\n        [0, 0, 0.5, 1],\n        Extrapolate.CLAMP\n      ),\n    };\n  }, [scrollValue, beforeFadeImg, startFadeImg, finishFadeImg]);\n  const nameAnimatedStyle = useAnimatedStyle(() => {\n    return {\n      opacity: interpolate(\n        scrollValue.value,\n        [0, beforeFadeName, startFadeName, finishFadeName],\n        [0, 0, 0.5, 1],\n        Extrapolate.CLAMP\n      ),\n    };\n  }, [scrollValue, beforeFadeName, startFadeName, finishFadeName]);\n  const headerTitleContainerRTLStyle = useRTLStyles<ViewStyle>(\n    styles.headerTitleContainerMarginRight,\n    styles.headerTitleContainerMarginLeft,\n    styles.headerTitleContainerMarginEnd\n  );\n  const wrapperAnimatedStyle = useAnimatedStyle(() => {\n    return {\n      // TypeScript complains about AnimatedNode<StyleProp<ViewStyle>> from reanimated v1\n      backgroundColor: parseAnimatedColorProp(backgroundColor) as string,\n    };\n  }, [backgroundColor]);\n\n  const safeAreaEdges: Edge[] = ['left', 'right'];\n\n  if (enableSafeAreaTopInset) {\n    safeAreaEdges.push('top');\n  }\n\n  return (\n    <SafeAreaView edges={safeAreaEdges} style={commonStyles.container}>\n      <Animated.View style={[commonStyles.headerWrapper, wrapperAnimatedStyle]}>\n        {leftTopIcon ? (\n          <Pressable\n            accessibilityLabel={leftTopIconAccessibilityLabel}\n            accessibilityRole=\"button\"\n            hitSlop={HIT_SLOP}\n            onPress={leftTopIconOnPress}\n            style={styles.leftHeaderButton}\n            testID={leftTopIconTestID}>\n            <IconRenderer icon={leftTopIcon} />\n          </Pressable>\n        ) : null}\n\n        <View style={[styles.headerTitleContainer, headerTitleContainerRTLStyle]}>\n          <Animated.Image\n            source={image as ImageSourcePropType}\n            style={[styles.headerPic, imageAnimatedStyle]}\n          />\n          <Animated.Text\n            numberOfLines={1}\n            style={[styles.headerTitle, nameAnimatedStyle, titleStyle]}\n            testID={titleTestID}>\n            {title}\n          </Animated.Text>\n        </View>\n        {rightTopIcon ? (\n          <Pressable\n            accessibilityLabel={rightTopIconAccessibilityLabel}\n            accessibilityRole=\"button\"\n            hitSlop={HIT_SLOP}\n            onPress={rightTopIconOnPress}\n            style={styles.rightHeaderButton}\n            testID={rightTopIconTestID}>\n            <IconRenderer icon={rightTopIcon} />\n          </Pressable>\n        ) : null}\n      </Animated.View>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  headerPic: {\n    width: 32,\n    height: 32,\n    borderRadius: 8,\n  },\n  headerTitle: {\n    fontSize: 16,\n    lineHeight: 20,\n    color: colors.white,\n    marginHorizontal: 12,\n    textAlign: 'left',\n  },\n  headerTitleContainer: {\n    flex: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  headerTitleContainerMarginEnd: {\n    marginEnd: 24,\n  },\n  headerTitleContainerMarginLeft: {\n    marginLeft: 24,\n  },\n  headerTitleContainerMarginRight: {\n    marginRight: 24,\n  },\n  leftHeaderButton: {\n    alignItems: 'flex-start',\n    flex: 1,\n  },\n  rightHeaderButton: {\n    flex: 1,\n    alignItems: 'flex-end',\n  },\n});\n"]}