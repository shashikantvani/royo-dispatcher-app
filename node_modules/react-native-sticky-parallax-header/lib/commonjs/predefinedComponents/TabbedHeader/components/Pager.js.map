{"version":3,"sources":["Pager.tsx"],"names":["NOOP","SCROLL_TO_PAGE_OFFSET_TIMEOUT","AnimatedFlatList","Animated","createAnimatedComponent","FlatList","Pager","React","forwardRef","ref","automaticallyAdjustContentInsets","children","contentContainerStyle","_contentOffset","contentOffset","directionalLockEnabled","disableScrollToPosition","initialPage","keyboardDismissMode","minScrollHeight","onChangeTab","onMomentumScrollBegin","onMomentumScrollEnd","onScroll","onScrollBeginDrag","onScrollEndDrag","page","pageContainerStyle","rememberTabScrollPosition","scrollEventThrottle","scrollHeight","scrollRef","scrollValue","scrollsToTop","showsHorizontalScrollIndicator","swipedPage","rest","useState","Dimensions","get","width","containerWidth","setContainerWidth","containerWidthRef","useRef","currentPage","setCurrentPage","currentPageRef","horizontalFlatListRef","horizontalScrollValue","scrollToTabPositionTimeoutValue","data","useMemo","Children","toArray","tabsScrollPosition","Array","length","fill","goToPageAnimationFrame","isInvertedAndroid","Platform","OS","I18nManager","isRTL","undefined","useEffect","current","scrollToOffset","offset","animated","cancelAnimationFrame","goToPage","onContainerLayout","e","nativeEvent","layout","Math","round","requestAnimationFrame","scrollToPage","scrollToTabPosition","position","scrollTo","x","y","pageNumber","handleScrollToTabPosition","prevPage","newPage","value","scrollTargetPosition","duration","handlePossiblePageChange","offsetX","handlePossiblePageChangeOnWeb","scrollHandler","onBeginDrag","onEndDrag","onMomentumBegin","onMomentumEnd","useImperativeHandle","renderItem","useCallback","item","styles","inversionStyle","container","commonStyles","rowReverse","row","minHeight","_","i","StyleSheet","create","flex","transform","scaleX"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport type { FlatListProps, LayoutChangeEvent, ListRenderItemInfo } from 'react-native';\nimport { Dimensions, FlatList, I18nManager, Platform, StyleSheet, View } from 'react-native';\nimport Animated, {\n  cancelAnimation,\n  runOnJS,\n  runOnUI,\n  scrollTo,\n  useAnimatedRef,\n  useAnimatedScrollHandler,\n  useSharedValue,\n  withDelay,\n  withTiming,\n} from 'react-native-reanimated';\n\nimport { commonStyles } from '../../../constants';\nimport { debounce } from '../../common/utils/debounce';\nimport type { InternalPagerProps } from '../InternalTabbedHeaderProps';\nimport type { PagerMethods, PagerProps } from '../TabbedHeaderProps';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst NOOP = () => {};\n\nconst SCROLL_TO_PAGE_OFFSET_TIMEOUT = 250;\n\ntype Page = React.ReactChild | React.ReactFragment | React.ReactPortal;\n\nconst AnimatedFlatList = Animated.createAnimatedComponent<FlatListProps<Page>>(FlatList);\n\nexport const Pager = React.forwardRef<PagerMethods, PagerProps & InternalPagerProps>(\n  (\n    {\n      automaticallyAdjustContentInsets = false,\n      children,\n      contentContainerStyle,\n      contentOffset: _contentOffset,\n      directionalLockEnabled = true,\n      disableScrollToPosition,\n      initialPage = 0,\n      keyboardDismissMode = 'on-drag',\n      minScrollHeight,\n      onChangeTab,\n      onMomentumScrollBegin,\n      onMomentumScrollEnd,\n      onScroll,\n      onScrollBeginDrag,\n      onScrollEndDrag,\n      page = -1,\n      pageContainerStyle,\n      rememberTabScrollPosition,\n      scrollEventThrottle = 16,\n      scrollHeight,\n      scrollRef,\n      scrollValue,\n      scrollsToTop = false,\n      showsHorizontalScrollIndicator = false,\n      swipedPage,\n      ...rest\n    },\n    ref\n  ) => {\n    const [containerWidth, setContainerWidth] = React.useState(\n      () => Dimensions.get('window').width\n    );\n    const containerWidthRef = React.useRef(containerWidth);\n    const [currentPage, setCurrentPage] = React.useState(initialPage);\n    const currentPageRef = React.useRef(currentPage);\n    const horizontalFlatListRef = useAnimatedRef<FlatList>();\n    const horizontalScrollValue = useSharedValue(initialPage * Dimensions.get('window').width);\n\n    const scrollToTabPositionTimeoutValue = useSharedValue(1);\n\n    const data = React.useMemo(() => {\n      return React.Children.toArray(children);\n    }, [children]);\n\n    const tabsScrollPosition = React.useRef<number[]>(Array(data.length).fill(-1));\n\n    const goToPageAnimationFrame = React.useRef<ReturnType<typeof requestAnimationFrame>>();\n\n    const isInvertedAndroid = Platform.OS === 'android' ? I18nManager.isRTL : undefined;\n\n    React.useEffect(() => {\n      /**\n       * Scroll to make first rendered tab visible (if not used, sometimes when Pager is first rendered, it has blank first tab)\n       */\n      horizontalFlatListRef.current?.scrollToOffset({ offset: 1, animated: true });\n      horizontalFlatListRef.current?.scrollToOffset({ offset: 0, animated: true });\n\n      return () => {\n        cancelAnimation(scrollToTabPositionTimeoutValue);\n        if (goToPageAnimationFrame.current) {\n          cancelAnimationFrame(goToPageAnimationFrame.current);\n        }\n      };\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    React.useEffect(() => {\n      if (page !== currentPageRef.current && page >= 0) {\n        goToPage(page);\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [page]);\n\n    function onContainerLayout(e: LayoutChangeEvent) {\n      const { width } = e.nativeEvent.layout;\n\n      if (!width || width <= 0 || Math.round(width) === Math.round(containerWidth)) {\n        return;\n      }\n\n      setContainerWidth(width);\n      containerWidthRef.current = width;\n      goToPageAnimationFrame.current = requestAnimationFrame(() => {\n        goToPage(currentPage);\n      });\n    }\n\n    function scrollToPage(offset: number) {\n      'worklet';\n      if (Platform.OS === 'web') {\n        horizontalFlatListRef.current?.scrollToOffset({ offset, animated: true });\n\n        return;\n      }\n\n      scrollTo(horizontalFlatListRef, offset, 0, true);\n    }\n\n    function scrollToTabPosition(position: number) {\n      'worklet';\n      if (Platform.OS === 'web') {\n        scrollRef.current?.scrollTo({ x: 0, y: position, animated: true });\n\n        return;\n      }\n\n      scrollTo(scrollRef, 0, position, true);\n    }\n\n    function goToPage(pageNumber: number) {\n      const offset = pageNumber * containerWidthRef.current;\n\n      handleScrollToTabPosition(currentPage, pageNumber);\n      runOnUI(scrollToPage)(offset);\n\n      setCurrentPage(page);\n      currentPageRef.current = page;\n      onChangeTab?.(currentPage, pageNumber);\n    }\n\n    function handleScrollToTabPosition(prevPage: number, newPage: number) {\n      if (!data.length || scrollValue.value === 0 || disableScrollToPosition) {\n        return;\n      }\n\n      tabsScrollPosition.current[prevPage] = scrollValue.value;\n      const scrollTargetPosition =\n        rememberTabScrollPosition && tabsScrollPosition.current[newPage] !== -1\n          ? tabsScrollPosition.current[newPage]\n          : scrollHeight;\n\n      scrollToTabPositionTimeoutValue.value = withDelay(\n        SCROLL_TO_PAGE_OFFSET_TIMEOUT,\n        withTiming(\n          scrollToTabPositionTimeoutValue.value * -1,\n          {\n            duration: 0,\n          },\n          () => {\n            'worklet';\n            scrollToTabPosition(scrollTargetPosition);\n          }\n        )\n      );\n    }\n\n    function handlePossiblePageChange(offsetX: number) {\n      const newPage = Math.round(offsetX / containerWidthRef.current);\n\n      if (currentPage !== newPage) {\n        swipedPage?.(newPage);\n        onChangeTab?.(currentPage, newPage);\n        setCurrentPage(newPage);\n        handleScrollToTabPosition(currentPage, newPage);\n      }\n    }\n\n    const handlePossiblePageChangeOnWeb = debounce((offsetX: number) => {\n      const newPage = Math.round(offsetX / containerWidthRef.current);\n\n      if (currentPageRef.current !== newPage) {\n        const prevPage = currentPageRef.current;\n\n        swipedPage?.(newPage);\n        onChangeTab?.(prevPage, newPage);\n        setCurrentPage(newPage);\n        handleScrollToTabPosition(prevPage, newPage);\n        currentPageRef.current = newPage;\n      }\n    }, 100);\n\n    const scrollHandler = useAnimatedScrollHandler({\n      onScroll: (e) => {\n        horizontalScrollValue.value = e.contentOffset.x;\n        onScroll?.(e);\n        if (Platform.OS === 'web') {\n          // On web there is no onMomentumScrollEnd\n          const offsetX = e.contentOffset.x;\n\n          runOnJS(handlePossiblePageChangeOnWeb)(offsetX);\n        }\n      },\n      onBeginDrag: (e) => {\n        onScrollBeginDrag?.(e);\n      },\n      onEndDrag: (e) => {\n        onScrollEndDrag?.(e);\n      },\n      onMomentumBegin: (e) => {\n        onMomentumScrollBegin?.(e);\n      },\n      onMomentumEnd: (e) => {\n        onMomentumScrollEnd?.(e);\n        const offsetX = e.contentOffset.x;\n\n        runOnJS(handlePossiblePageChange)(offsetX);\n      },\n    });\n\n    React.useImperativeHandle(ref, () => ({ goToPage }));\n\n    const renderItem = React.useCallback(\n      ({ item }: ListRenderItemInfo<Page>) => {\n        return (\n          <Animated.View\n            style={[\n              isInvertedAndroid && styles.inversionStyle,\n              // used to calculate current height of scroll\n              {\n                width: containerWidth,\n              },\n              pageContainerStyle,\n            ]}>\n            {item}\n          </Animated.View>\n        );\n      },\n      [containerWidth, isInvertedAndroid, pageContainerStyle]\n    );\n\n    return (\n      <View style={styles.container} onLayout={onContainerLayout}>\n        <AnimatedFlatList\n          ref={horizontalFlatListRef as unknown as React.RefObject<Animated.FlatList<Page>>}\n          {...rest}\n          automaticallyAdjustContentInsets={automaticallyAdjustContentInsets}\n          contentContainerStyle={[\n            Platform.OS === 'android'\n              ? I18nManager.isRTL\n                ? commonStyles.rowReverse\n                : commonStyles.row\n              : null,\n            { minHeight: minScrollHeight },\n            contentContainerStyle,\n          ]}\n          contentOffset={{ x: initialPage * containerWidth, y: 0 }}\n          data={data}\n          directionalLockEnabled={directionalLockEnabled}\n          horizontal\n          keyExtractor={(_, i) => `${i}`}\n          keyboardDismissMode={keyboardDismissMode}\n          onScroll={scrollHandler}\n          /**\n           * Workaround for reanimated v2.3+ bug\n           *\n           * https://github.com/software-mansion/react-native-reanimated/issues/2735#issuecomment-1001714779\n           */\n          onMomentumScrollBegin={NOOP}\n          onMomentumScrollEnd={NOOP}\n          onScrollBeginDrag={NOOP}\n          onScrollEndDrag={NOOP}\n          pagingEnabled\n          renderItem={renderItem}\n          scrollEventThrottle={scrollEventThrottle}\n          scrollsToTop={scrollsToTop}\n          showsHorizontalScrollIndicator={showsHorizontalScrollIndicator}\n          style={[isInvertedAndroid && styles.inversionStyle]}\n        />\n      </View>\n    );\n  }\n);\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  inversionStyle: {\n    transform: [{ scaleX: -1 }],\n  },\n});\n"]}