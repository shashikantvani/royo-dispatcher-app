{"version":3,"sources":["withStickyHeader.tsx"],"names":["React","StyleSheet","View","Animated","useStickyHeaderProps","NOOP","createCellRenderer","itemLayoutAnimation","cellRenderer","props","onLayout","children","withStickyHeader","component","AnimatedComponent","createAnimatedComponent","forwardRef","ref","containerStyle","contentContainerStyle","overScrollMode","renderHeader","renderTabs","scrollEventThrottle","style","rest","contentContainerPaddingTop","contentContainerPaddingBottom","headerAnimatedStyle","headerHeight","listPaddingTop","onHeaderLayoutInternal","onTabsLayoutInternal","scrollHandler","tabsHeight","useMemo","styles","container","header","paddingTop","paddingBottom","create","alignSelf","flex","overflow","position","left","right","zIndex"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport * as React from 'react';\nimport type { LayoutChangeEvent } from 'react-native';\nimport { StyleSheet, View } from 'react-native';\nimport Animated from 'react-native-reanimated';\n\nimport type { StickyHeaderSharedProps } from './StickyHeaderProps';\nimport { useStickyHeaderProps } from './useStickyHeaderProps';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst NOOP = () => {};\n\nconst createCellRenderer = (itemLayoutAnimation: any) => {\n  const cellRenderer: React.FC<{ onLayout: (event: LayoutChangeEvent) => void }> = (props) => {\n    return (\n      <Animated.View layout={itemLayoutAnimation} onLayout={props.onLayout}>\n        {props.children}\n      </Animated.View>\n    );\n  };\n\n  return cellRenderer;\n};\n\nexport function withStickyHeader<T extends React.ComponentClass<any>>(component: T) {\n  const AnimatedComponent = Animated.createAnimatedComponent(component) as any;\n\n  return React.forwardRef<\n    T,\n    StickyHeaderSharedProps & Animated.AnimateProps<React.ComponentPropsWithRef<T>>\n  >((props, ref) => {\n    const {\n      containerStyle,\n      contentContainerStyle,\n      itemLayoutAnimation,\n      overScrollMode = 'never',\n      renderHeader,\n      renderTabs,\n      scrollEventThrottle = 16,\n      style,\n      ...rest\n    } = props;\n    const {\n      contentContainerPaddingTop,\n      contentContainerPaddingBottom,\n      headerAnimatedStyle,\n      headerHeight,\n      listPaddingTop,\n      onHeaderLayoutInternal,\n      onTabsLayoutInternal,\n      scrollHandler,\n      tabsHeight,\n    } = useStickyHeaderProps(props);\n\n    const cellRenderer = React.useMemo(\n      () => createCellRenderer(itemLayoutAnimation),\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      []\n    );\n\n    return (\n      <View style={[styles.container, containerStyle]}>\n        <Animated.View pointerEvents=\"box-none\" style={[styles.header, headerAnimatedStyle]}>\n          {renderHeader ? (\n            <View pointerEvents=\"box-none\" onLayout={onHeaderLayoutInternal}>\n              {renderHeader()}\n            </View>\n          ) : null}\n          {renderTabs ? (\n            <View pointerEvents=\"box-none\" onLayout={onTabsLayoutInternal}>\n              {renderTabs()}\n            </View>\n          ) : null}\n        </Animated.View>\n        <AnimatedComponent\n          ref={ref}\n          {...rest}\n          CellRendererComponent={cellRenderer}\n          contentContainerStyle={[\n            contentContainerStyle,\n            { paddingTop: headerHeight + contentContainerPaddingTop },\n            { paddingBottom: tabsHeight + contentContainerPaddingBottom },\n          ]}\n          onScroll={scrollHandler}\n          /**\n           * Workaround for reanimated v2.3+ bug\n           *\n           * https://github.com/software-mansion/react-native-reanimated/issues/2735#issuecomment-1001714779\n           */\n          onScrollBeginDrag={NOOP}\n          onScrollEndDrag={NOOP}\n          onMomentumScrollBegin={NOOP}\n          onMomentumScrollEnd={NOOP}\n          overScrollMode={overScrollMode}\n          progressViewOffset={headerHeight}\n          scrollEventThrottle={scrollEventThrottle}\n          style={[style, { paddingTop: tabsHeight + listPaddingTop }]}\n        />\n      </View>\n    );\n  }) as unknown as React.FC<\n    StickyHeaderSharedProps & Animated.AnimateProps<React.ComponentPropsWithRef<T>>\n  >;\n}\n\nexport const styles = StyleSheet.create({\n  container: {\n    alignSelf: 'stretch',\n    flex: 1,\n    overflow: 'hidden',\n  },\n  header: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    zIndex: 999,\n  },\n});\n"]}